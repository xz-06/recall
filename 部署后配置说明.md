# ⚙️ 部署后配置说明

部署到GitHub Pages后，需要配置后端API地址才能使用上传功能。

## 🎯 快速配置（3步）

### 步骤1：部署后端服务器

按照 `部署后端说明.md` 的步骤，将后端部署到Railway或Render，获取后端地址。

例如：`https://recall-backend.up.railway.app`

### 步骤2：更新配置

修改 `docs/js/config.js` 文件：

找到这一行：
```javascript
const BACKEND_URL = 'https://your-backend.railway.app';
```

替换为你的实际后端地址：
```javascript
const BACKEND_URL = 'https://recall-backend.up.railway.app'; // 你的实际地址
```

### 步骤3：提交并推送

```bash
git add docs/js/config.js
git commit -m "配置生产环境后端地址"
git push origin main
```

等待GitHub Actions完成部署（约2-5分钟），网站就会自动更新！

---

## 📝 详细说明

### 为什么需要配置？

- **GitHub Pages** 只能部署静态站点（HTML/CSS/JS）
- **上传功能** 需要后端API服务器处理
- 需要将前端和后端连接起来

### 配置原理

1. `docs/js/config.js` 会在页面加载时检测环境
2. 如果是生产环境（不是localhost），自动将上传链接指向后端服务器
3. 开发环境仍然使用 `localhost:3001`

### 验证配置

配置完成后：

1. 访问你的GitHub Pages网站
2. 点击"上传新回忆"按钮
3. 应该能正常打开上传页面
4. 填写信息并上传，应该能成功提交

---

## 🔧 如果还有问题

### 问题1：点击上传按钮还是404

**检查**：
1. `docs/js/config.js` 中的地址是否正确
2. 后端服务器是否正常运行
3. 浏览器控制台是否有错误

**解决**：
```bash
# 检查后端是否正常
curl https://你的后端地址/api/upload/memories
```

### 问题2：CORS错误

后端已经配置了CORS，如果还有问题：

1. 检查 `server/index.js` 中的CORS配置
2. 确保允许你的GitHub Pages域名

### 问题3：上传后无法跳转

检查 `upload.html` 中的跳转地址是否正确。

---

💕 配置完成后，上传功能就可以正常使用了！

